var HOST=""+location.protocol+"//"+location.hostname+location.pathname;function reportTemplate(b,g,l,f,h,d,m,e,k,n){var j="";j="<article><h6><a href='?mode=get_comment_list&include_report=true&user="+g+"'>"+g+"</a> said on "+l+":</h6><div class='tools'>";if(!n){j+="<a href='?mode=get_comment&id="+b+"' data-id="+b+" class='go-button'> &gt; </a>"}j+="<a href='?mode=follow&id="+b+"' data-id="+b+" class='follow-button'> follow </a>";j+="<a href='?mode=like&id="+b+"' data-id="+b+" class='like-button'> like </a></div><p>";j+=f+"</p><span class='small'><a href="+k+" target='_blank' title=\""+k+'">'+(k.length>40?k.substr(0,40)+"...":k)+"</a> on "+e+"</a><span class='additional-information'>"+h+"."+d+" on "+m+"</span></article>";return j}function commentWriter(e,j){if(!e){return false}var l=JSON.parse(e);var k="";for(f in l.list){a=l.list[f];k+=reportTemplate(a.id,a.username,a.date_time,a.report,a.Opera,a.build,a.OS,a.domain,a.page,true)}var b="<form action='' id='comment-form'>                 <input type='text' data-fid='system' id='OS' value=''>                 <input type='text' data-fid='version' id='opera-version'>                 <input type='text' data-fid='build' id='opera-build-number'>                 <input type='hidden' data-fid='language' id='language'>                 <textarea id='comment-text' data-fid='description' placeholder='Please enter your comment'></textarea>                 <textarea style='display:none' id='additional-information' data-fid='misc'></textarea>                 <button type='submit' data-fid='misc'>Send</button>             </form>";document.getElementsByTagName("section")[0].innerHTML=k+b;if(window.localStorage==null||(window.localStorage!=null&&localStorage.getItem("clientOS")==null)){sendRequest("GET",HOST+"ajax_request_handler.php?mode=get_OS",function(m){document.getElementById("OS").value=m;localStorage.setItem("clientOS",m)},null)}else{document.getElementById("OS").value=localStorage.getItem("clientOS")}document.getElementById("comment-form").addEventListener("submit",function(m){m.preventDefault();var n="";for(f=0,formElements=document.getElementById("comment-form").children;f<6;f++){n+="&"+formElements[f].dataset.fid+"="+formElements[f].value}sendRequest("GET",HOST+"ajax_request_handler.php?mode=write_a_comment&id="+l.id+n,function(o){if(o!="true"){alert(o)}else{if(window.history){sendRequest("GET",HOST+"ajax_request_handler.php?+"+history.state.query,commentWriter,null)}else{sendRequest("GET",HOST+"ajax_request_handler.php"+document.location.search,commentWriter,null)}alert("Your comment is sent")}},null)},false);if((window.opera)&&(opera.buildNumber)){document.getElementById("opera-version").value=opera.version();document.getElementById("opera-build-number").value=opera.buildNumber()}document.getElementById("language").value=navigator.userLanguage;var g="\r\n===========\r\n";var d="";d+="PLUGINS:"+g;if(navigator.plugins){for(var f=0;f<navigator.plugins.length;f++){var h=navigator.plugins[f];d+="* "+h.name+" ("+h.description+") "+h.filename+"\r\n"}}d+="\n\nSCREEN:"+g;if((typeof(screen.width)!="undefined")&&(screen.width&&screen.height)){d+="Resolution: "+screen.width+"x"+screen.height+"\n"}if((typeof(screen.colorDepth)!="undefined")&&(screen.colorDepth)){d+="ColorDepth: "+screen.colorDepth+"\r\n"}document.getElementById("additional-information").innerHTML=d;if(!j){history.pushState({data:e,type:l.type,query:l.query,id:(l.id==undefined)?"":l.id,page:(l.page==undefined)?"1":l.page,user:(l.user==undefined)?"":l.user,domain:(l.domain==undefined)?"":l.domain,url:(l.url==undefined)?"":l.url,},"Comments",HOST+"?"+l.query)}}function reportWriter(f,g){if(!f){return false}var b=JSON.parse(f);var d="";for(i in b.list){a=b.list[i];d+=reportTemplate(a.id,a.username,a.date_time,a.report,a.Opera,a.build,a.OS,a.domain,a.page,false)}if(b.page==1){prevLink=b.query;nextLink=b.query+"&page=2"}else{prevLink=b.query.replace("page="+b.page,"page="+(b.page-1));nextLink=b.query.replace("page="+b.page,"page="+(b.page+1))}d+="<a href='?"+prevLink+"' id='prev'>&lt;</a> <input type='number' onchange='go2page(this.value)' id='page' value='"+(b.page)+"'><a href='?"+nextLink+"' id='forw'>&gt;</a>";document.querySelector("section").innerHTML=d;if(!g){history.pushState({data:f,type:b.type,query:b.query,id:(b.id==undefined)?"":b.id,page:(b.page==undefined)?"1":b.page,user:(b.user==undefined)?"":b.user,domain:(b.domain==undefined)?"":b.domain,url:(b.url==undefined)?"":b.url,},"Reports",HOST+"?"+b.query)}var e=document.querySelectorAll(".go-button");for(c=0;c<e.length;c++){e[c].addEventListener("click",function(h){h.preventDefault();sendRequest("GET",HOST+"ajax_request_handler.php?mode=get_comment_list&id="+h.target.dataset.id,commentWriter,null);return false},false)}document.getElementById("prev").addEventListener("click",reportPaging,false);document.getElementById("forw").addEventListener("click",reportPaging,false)}window.addEventListener("popstate",function(b){if(b.state==null){return false}switch(b.state.type){case"comments":commentWriter(b.state.data,1);break;case"reports":reportWriter(b.state.data,1);break}},false);function goHomePage(){sendRequest("GET",HOST+"ajax_request_handler.php?mode=get_report_list",reportWriter,null)}if(location.search.length>1){if(location.search.search("get_report_list")>0){sendRequest("GET",HOST+"ajax_request_handler.php"+location.search,reportWriter,null)}else{if(location.search.search("get_comment_list")>0){sendRequest("GET",HOST+"ajax_request_handler.php"+location.search,commentWriter,null)}}}else{goHomePage()}window.addEventListener("DOMContentLoaded",function(){document.getElementById("form").addEventListener("submit",function(){event.preventDefault();var b="";if(document.getElementById("domain").value){b+="&domain="+document.getElementById("domain").value}sendRequest("GET",HOST+"ajax_request_handler.php?mode=get_report_list&search=1"+b,reportWriter,null);return false},false);document.querySelector("header h1 a").addEventListener("click",function(){event.preventDefault();goHomePage();return false},false);document.getElementById("most-popular-reports").addEventListener("click",function(b){b.preventDefault();sendRequest("GET",HOST+"ajax_request_handler.php?mode=get_report_list&order=popularity",reportWriter,null)},false);document.getElementById("most-followed-reports").addEventListener("click",function(b){b.preventDefault();sendRequest("GET",HOST+"ajax_request_handler.php?mode=get_report_list&order=most_followed",reportWriter,null)},false);document.getElementById("more-detail-about-project").addEventListener("click",function(d){var b=document.getElementById("explanation-about-the-extension");switch(b.style.height){case"":case"100px":b.style.height="auto";d.target.innerText="Less";b.className="";break;case"auto":b.style.height="100px";d.target.innerText="More";b.className="closed";break}},false)},false);function reportPaging(b){b.preventDefault();sendRequest("GET",HOST+"ajax_request_handler.php"+b.target.href.match(/\?.*/)[0],reportWriter,null)}function sendRequest(k,e,j,h){var g=new XMLHttpRequest();document.getElementById("loading").style.display="block";g.onreadystatechange=function(){if(this.status==200&&this.readyState==4){if(typeof j=="function"){j(this.responseText)}document.getElementById("loading").style.display="none"}};if(typeof h=="object"&&h){var d="";for(i in h){if(typeof f=="undefined"){d+=i+"="+encodeURIComponent(h[i]);var f=true}else{d+="&"+i+"="+encodeURIComponent(h[i])}}}else{d=false}try{if(k.toLowerCase()!="get"){throw'Invalid method "'+k+'" was specified. AJAX request could not be completed.'}else{g.open(k,e+(d&&d.length?"?"+d:""),true);g.send(null)}}catch(b){console.log("Error: "+b);return false}};